Return-Path: <dmaengine-owner@vger.kernel.org>
X-Original-To: lists+dmaengine@lfdr.de
Delivered-To: lists+dmaengine@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 7B728220793
	for <lists+dmaengine@lfdr.de>; Wed, 15 Jul 2020 10:41:27 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1729192AbgGOIl0 (ORCPT <rfc822;lists+dmaengine@lfdr.de>);
        Wed, 15 Jul 2020 04:41:26 -0400
Received: from de-out1.bosch-org.com ([139.15.230.186]:58438 "EHLO
        de-out1.bosch-org.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1729373AbgGOIl0 (ORCPT
        <rfc822;dmaengine@vger.kernel.org>); Wed, 15 Jul 2020 04:41:26 -0400
Received: from si0vm1947.rbesz01.com (lb41g3-ha-dmz-psi-sl1-mailout.fe.ssn.bosch.com [139.15.230.188])
        by si0vms0216.rbdmz01.com (Postfix) with ESMTPS id 4B69pR5Dw3z1XLm4r;
        Wed, 15 Jul 2020 10:41:19 +0200 (CEST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=etas.com;
        s=key1-intmail; t=1594802479;
        bh=/rfClegd/oGVTBzykNlL7JmX2W+X4Ern425stX9PzYE=; l=10;
        h=From:Subject:From:Reply-To:Sender;
        b=FbT29GjRrpHOXH6MV7ee7eQQQOA0KuGecwcLMooIMoZnGreoi939+JC66N6sD1VCe
         0neHhwSO1Ikr1WkYuiBZhWAE5945DEPEsRCff0+GF3Hkka/MOqlgRmW9Nme/HZMBe/
         5w4qOicJdbtd/nc3wVTNMj4pHA1tjdp7P59o8n10=
Received: from fe0vm7918.rbesz01.com (unknown [10.58.172.176])
        by si0vm1947.rbesz01.com (Postfix) with ESMTPS id 4B69pR4ZD8z6CjTcq;
        Wed, 15 Jul 2020 10:41:19 +0200 (CEST)
X-AuditID: 0a3aad10-199ff70000004153-49-5f0ec12f7c22
Received: from fe0vm1652.rbesz01.com ( [10.58.173.29])
        (using TLS with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
        (Client did not present a certificate)
        by fe0vm7918.rbesz01.com (SMG Outbound) with SMTP id 39.94.16723.F21CE0F5; Wed, 15 Jul 2020 10:41:19 +0200 (CEST)
Received: from FE-MBX2012.de.bosch.com (fe-mbx2012.de.bosch.com [10.3.231.18])
        by fe0vm1652.rbesz01.com (Postfix) with ESMTPS id 4B69pR3JkBzB1C;
        Wed, 15 Jul 2020 10:41:19 +0200 (CEST)
Received: from FE-MBX2012.de.bosch.com (10.3.231.18) by
 FE-MBX2012.de.bosch.com (10.3.231.18) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.1.1979.3; Wed, 15 Jul 2020 10:41:19 +0200
Received: from FE-MBX2012.de.bosch.com ([fe80::e9da:da62:f945:1619]) by
 FE-MBX2012.de.bosch.com ([fe80::e9da:da62:f945:1619%5]) with mapi id
 15.01.1979.003; Wed, 15 Jul 2020 10:41:19 +0200
From:   "Koehrer Mathias (ETAS/EES-SL)" <mathias.koehrer@etas.com>
To:     "dmaengine@vger.kernel.org" <dmaengine@vger.kernel.org>,
        "vkoul@kernel.org" <vkoul@kernel.org>
Subject: [PATCH v4] dmaengine: Extend NXP QDMA driver to check transmission
 errors
Thread-Topic: [PATCH v4] dmaengine: Extend NXP QDMA driver to check
 transmission errors
Thread-Index: AQHWWoO1EAV7iYCimUu0ptx+2YTrlA==
Date:   Wed, 15 Jul 2020 08:41:19 +0000
Message-ID: <744443c0462aac2df4754f99500a911527c0b235.camel@bosch.com>
Accept-Language: de-DE, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-mailer: Evolution 3.28.5-0ubuntu0.18.04.2 
x-originating-ip: [10.14.55.187]
Content-Type: text/plain; charset="utf-8"
Content-ID: <2CEA3CE3B509E74A8A0725DB5BDAD145@bosch.com>
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Brightmail-Tracker: H4sIAAAAAAAAA+NgFmplkeLIzCtJLcpLzFFi42Lhslorq6t/kC/e4P4xBYvVU/+yWuy8c4LZ
        gclj06pONo/Pm+QCmKK4bFJSczLLUov07RK4Mk4ub2YqmGRU0bl4JlsD4xuDLkYODgkBE4l9
        Ly26GLk4hARmMEksufeJrYuRE8jZzSixb78nROIto8TOlgXMEM4BRomntz4ygVSxCThIzFuw
        nh3EFhFIkTj1/zsriC0sECKxd8F3Noh4pMTK/x2sELaexPytK8F6WQRUJW5+OwnWyyvgJjHt
        6mkWEJtRQFZiw4bzzCA2s4C4xK0n88HqJQQEJJbsgYhLCIhKvHz8jxXC1pG49WkqVI2CxIVH
        f1lBPmMW0JRYv0sfYoyFxKyZbawQtqLElO6HUGsFJU7OfMIygVFsFpJtsxC6ZyHpnoWkexaS
        7gWMrKsYRdNSDcpyzS0NLfSKklKLqwwM9ZLzczcxQmJKYAfj7e4PeocYmTgYDzFKcDArifDy
        cPHGC/GmJFZWpRblxxeV5qQWH2KU5mBREudV4dkYJySQnliSmp2aWpBaBJNl4uCUamAyWt/K
        ui+A7d7cp9PfF5x7fX3Rr9572aLVZc0yPM5OxUe92fvtKhib+Oc83VvaXVTl+kvyOFPQo2uT
        RX3enjDmWhdtv1/lse3SVVEcBWu9ui5EXpp/IuQi/5/Mtz/kps2e33b734mptjOe3ZgiMa9y
        rnZEypdHLnvqr7RZPp0sxLsxx3XXg3Z7Af5tJwOuLJRM8ZibezND8sTEshIZp3d994qXTul6
        yP32f+sVFg1D/SiHhppzjrrXMxXMPNm7z33J+OY/yTpkr/3FmMUf6ir175iv6ZgsMkvQs65i
        ZdSD3dM3zrOewLPV88edxoU3nGa3WOxc35EkPqvIMYanda3k0ao1LuwVyXxsX11+JUQqsRRn
        JBpqMRcVJwIAUyo3UxgDAAA=
Sender: dmaengine-owner@vger.kernel.org
Precedence: bulk
List-ID: <dmaengine.vger.kernel.org>
X-Mailing-List: dmaengine@vger.kernel.org

RXh0ZW5kIE5YUCBRRE1BIGRyaXZlciB0byBjaGVjayB0cmFuc21pc3Npb24gZXJyb3JzDQoNClRo
ZSBOWFAgUURNQSBkcml2ZXIgKGZzbC1xZG1hLmMpIGRvZXMgbm90IGNoZWNrIHRoZSBzdGF0dXMg
Yml0cw0KdGhhdCBpbmRpY2F0ZSBpZiBhIERNQSB0cmFuc2ZlciBoYXMgYmVlbiBjb21wbGV0ZWQg
c3VjY2Vzc2Z1bGx5Lg0KVGhpcyBwYXRjaCBleHRlbmRzIHRoZSBkcml2ZXIgdG8gZG8gZXhhY3Rs
eSB0aGlzLg0KDQpTaWduZWQtb2ZmLWJ5OiBNYXRoaWFzIEtvZWhyZXIgPG1hdGhpYXMua29laHJl
ckBldGFzLmNvbT4NCg0KLS0tDQpDaGFuZ2Vsb2cgdjI6DQotIEZpeCBwYXRjaCBmb3JtYXQNCg0K
Q2hhbmdlbG9nIHYzOg0KLSBGaXggbWlzc2luZyBwYXJlbnRoZXNlcw0KDQpDaGFuZ2Vsb2cgdjQ6
DQotIEFkYXB0IHNvdXJjZSBjb2RlIGZvcm1hdHRpbmcNCg0KLS0tDQpJbmRleDogbGludXgtNS40
L2RyaXZlcnMvZG1hL2ZzbC1xZG1hLmMNCj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCi0tLSBsaW51eC01LjQub3JpZy9k
cml2ZXJzL2RtYS9mc2wtcWRtYS5jDQorKysgbGludXgtNS40L2RyaXZlcnMvZG1hL2ZzbC1xZG1h
LmMNCkBAIC01Niw3ICs1Niw3IEBADQogDQogLyogUmVnaXN0ZXJzIGZvciBiaXQgYW5kIGdlbm1h
c2sgKi8NCiAjZGVmaW5lIEZTTF9RRE1BX0NRSURSX1NRVAkJQklUKDE1KQ0KLSNkZWZpbmUgUURN
QV9DQ0RGX0ZPVE1BVAkJQklUKDI5KQ0KKyNkZWZpbmUgUURNQV9DQ0RGX0ZPUk1BVAkJQklUKDI5
KQ0KICNkZWZpbmUgUURNQV9DQ0RGX1NFUgkJCUJJVCgzMCkNCiAjZGVmaW5lIFFETUFfU0dfRklO
CQkJQklUKDMwKQ0KICNkZWZpbmUgUURNQV9TR19MRU5fTUFTSwkJR0VOTUFTSygyOSwgMCkNCkBA
IC0xMTAsOCArMTEwLDE5IEBADQogI2RlZmluZSBGU0xfUURNQV9DTURfRFNFTl9PRkZTRVQJMTkN
CiAjZGVmaW5lIEZTTF9RRE1BX0NNRF9MV0NfT0ZGU0VUCQkxNg0KIA0KKy8qIEZpZWxkIGRlZmlu
aXRpb24gZm9yIERlc2NyaXB0b3Igc3RhdHVzICovDQorI2RlZmluZSBRRE1BX0NDREZfU1RBVFVT
X1JURQkJQklUKDUpDQorI2RlZmluZSBRRE1BX0NDREZfU1RBVFVTX1dURQkJQklUKDQpDQorI2Rl
ZmluZSBRRE1BX0NDREZfU1RBVFVTX0NERQkJQklUKDIpDQorI2RlZmluZSBRRE1BX0NDREZfU1RB
VFVTX1NERQkJQklUKDEpDQorI2RlZmluZSBRRE1BX0NDREZfU1RBVFVTX0RERQkJQklUKDApDQor
I2RlZmluZSBRRE1BX0NDREZfU1RBVFVTX01BU0sJCShRRE1BX0NDREZfU1RBVFVTX1JURSB8IFwN
CisJCQkJCVFETUFfQ0NERl9TVEFUVVNfV1RFIHwgXA0KKwkJCQkJUURNQV9DQ0RGX1NUQVRVU19D
REUgfCBcDQorCQkJCQlRRE1BX0NDREZfU1RBVFVTX1NERSB8IFwNCisJCQkJCVFETUFfQ0NERl9T
VEFUVVNfRERFKQ0KKw0KIC8qIEZpZWxkIGRlZmluaXRpb24gZm9yIERlc2NyaXB0b3Igb2Zmc2V0
ICovDQotI2RlZmluZSBRRE1BX0NDREZfU1RBVFVTCQkyMA0KICNkZWZpbmUgUURNQV9DQ0RGX09G
RlNFVAkJMjANCiAjZGVmaW5lIFFETUFfU0RERl9DTUQoeCkJCSgoKHU2NCkoeCkpIDw8IDMyKQ0K
IA0KQEAgLTI0MywxMyArMjU0LDE0IEBAIHFkbWFfY2NkZl9nZXRfb2Zmc2V0KGNvbnN0IHN0cnVj
dCBmc2xfcWQNCiBzdGF0aWMgaW5saW5lIHZvaWQNCiBxZG1hX2NjZGZfc2V0X2Zvcm1hdChzdHJ1
Y3QgZnNsX3FkbWFfZm9ybWF0ICpjY2RmLCBpbnQgb2Zmc2V0KQ0KIHsNCi0JY2NkZi0+Y2ZnID0g
Y3B1X3RvX2xlMzIoUURNQV9DQ0RGX0ZPVE1BVCB8IG9mZnNldCk7DQorCWNjZGYtPmNmZyA9IGNw
dV90b19sZTMyKFFETUFfQ0NERl9GT1JNQVQgfA0KKwkJCQkob2Zmc2V0IDw8IFFETUFfQ0NERl9P
RkZTRVQpKTsNCiB9DQogDQogc3RhdGljIGlubGluZSBpbnQNCiBxZG1hX2NjZGZfZ2V0X3N0YXR1
cyhjb25zdCBzdHJ1Y3QgZnNsX3FkbWFfZm9ybWF0ICpjY2RmKQ0KIHsNCi0JcmV0dXJuIChsZTMy
X3RvX2NwdShjY2RmLT5zdGF0dXMpICYgUURNQV9DQ0RGX01BU0spID4+IFFETUFfQ0NERl9TVEFU
VVM7DQorCXJldHVybiAobGUzMl90b19jcHUoY2NkZi0+c3RhdHVzKSAmIFFETUFfQ0NERl9TVEFU
VVNfTUFTSyk7DQogfQ0KIA0KIHN0YXRpYyBpbmxpbmUgdm9pZA0KQEAgLTYxOCw2ICs2MzAsNyBA
QCBmc2xfcWRtYV9xdWV1ZV90cmFuc2Zlcl9jb21wbGV0ZShzdHJ1Y3QNCiB7DQogCWJvb2wgZHVw
bGljYXRlOw0KIAl1MzIgcmVnLCBpLCBjb3VudDsNCisJdTggY29tcGxldGlvbl9zdGF0dXM7DQog
CXN0cnVjdCBmc2xfcWRtYV9xdWV1ZSAqdGVtcF9xdWV1ZTsNCiAJc3RydWN0IGZzbF9xZG1hX2Zv
cm1hdCAqc3RhdHVzX2FkZHI7DQogCXN0cnVjdCBmc2xfcWRtYV9jb21wICpmc2xfY29tcCA9IE5V
TEw7DQpAQCAtNjc3LDYgKzY5MCw4IEBAIGZzbF9xZG1hX3F1ZXVlX3RyYW5zZmVyX2NvbXBsZXRl
KHN0cnVjdA0KIAkJfQ0KIAkJbGlzdF9kZWwoJmZzbF9jb21wLT5saXN0KTsNCiANCisJCWNvbXBs
ZXRpb25fc3RhdHVzID0gcWRtYV9jY2RmX2dldF9zdGF0dXMoc3RhdHVzX2FkZHIpOw0KKw0KIAkJ
cmVnID0gcWRtYV9yZWFkbChmc2xfcWRtYSwgYmxvY2sgKyBGU0xfUURNQV9CU1FNUik7DQogCQly
ZWcgfD0gRlNMX1FETUFfQlNRTVJfREk7DQogCQlxZG1hX2Rlc2NfYWRkcl9zZXQ2NChzdGF0dXNf
YWRkciwgMHgwKTsNCkBAIC02ODYsNiArNzAxLDMxIEBAIGZzbF9xZG1hX3F1ZXVlX3RyYW5zZmVy
X2NvbXBsZXRlKHN0cnVjdA0KIAkJcWRtYV93cml0ZWwoZnNsX3FkbWEsIHJlZywgYmxvY2sgKyBG
U0xfUURNQV9CU1FNUik7DQogCQlzcGluX3VubG9jaygmdGVtcF9xdWV1ZS0+cXVldWVfbG9jayk7
DQogDQorCQkvKiBUaGUgY29tcGxldGlvbl9zdGF0dXMgaXMgZXZhbHVhdGVkIGhlcmUNCisJCSAq
IChvdXRzaWRlIG9mIHNwaW4gbG9jaykNCisJCSAqLw0KKwkJaWYgKGNvbXBsZXRpb25fc3RhdHVz
KSB7DQorCQkJLyogQSBjb21wbGV0aW9uIGVycm9yIG9jY3VycmVkISAqLw0KKwkJCWlmIChjb21w
bGV0aW9uX3N0YXR1cyAmIFFETUFfQ0NERl9TVEFUVVNfV1RFKSB7DQorCQkJCS8qIFdyaXRlIHRy
YW5zYWN0aW9uIGVycm9yICovDQorCQkJCWZzbF9jb21wLT52ZGVzYy50eF9yZXN1bHQucmVzdWx0
ID0NCisJCQkJCURNQV9UUkFOU19XUklURV9GQUlMRUQ7DQorCQkJfSBlbHNlIGlmIChjb21wbGV0
aW9uX3N0YXR1cyAmIFFETUFfQ0NERl9TVEFUVVNfUlRFKSB7DQorCQkJCS8qIFJlYWQgdHJhbnNh
Y3Rpb24gZXJyb3IgKi8NCisJCQkJZnNsX2NvbXAtPnZkZXNjLnR4X3Jlc3VsdC5yZXN1bHQgPQ0K
KwkJCQkJRE1BX1RSQU5TX1JFQURfRkFJTEVEOw0KKwkJCX0gZWxzZSB7DQorCQkJCS8qIENvbW1h
bmQvc291cmNlL2Rlc3RpbmF0aW9uDQorCQkJCSAqIGRlc2NyaXB0aW9uIGVycm9yDQorCQkJCSAq
Lw0KKwkJCQlmc2xfY29tcC0+dmRlc2MudHhfcmVzdWx0LnJlc3VsdCA9DQorCQkJCQlETUFfVFJB
TlNfQUJPUlRFRDsNCisJCQkJZGV2X2Vycihmc2xfcWRtYS0+ZG1hX2Rldi5kZXYsDQorCQkJCQki
RE1BIHN0YXR1cyBkZXNjcmlwdG9yIGVycm9yICV4XG4iLA0KKwkJCQkJY29tcGxldGlvbl9zdGF0
dXMpOw0KKwkJCX0NCisJCX0NCisNCiAJCXNwaW5fbG9jaygmZnNsX2NvbXAtPnFjaGFuLT52Y2hh
bi5sb2NrKTsNCiAJCXZjaGFuX2Nvb2tpZV9jb21wbGV0ZSgmZnNsX2NvbXAtPnZkZXNjKTsNCiAJ
CWZzbF9jb21wLT5xY2hhbi0+c3RhdHVzID0gRE1BX0NPTVBMRVRFOw0KQEAgLTcwMCwxMSArNzQw
LDIyIEBAIHN0YXRpYyBpcnFyZXR1cm5fdCBmc2xfcWRtYV9lcnJvcl9oYW5kbGUNCiAJdW5zaWdu
ZWQgaW50IGludHI7DQogCXN0cnVjdCBmc2xfcWRtYV9lbmdpbmUgKmZzbF9xZG1hID0gZGV2X2lk
Ow0KIAl2b2lkIF9faW9tZW0gKnN0YXR1cyA9IGZzbF9xZG1hLT5zdGF0dXNfYmFzZTsNCisJdW5z
aWduZWQgaW50IGRlY2ZkdzByOw0KKwl1bnNpZ25lZCBpbnQgZGVjZmR3MXI7DQorCXVuc2lnbmVk
IGludCBkZWNmZHcycjsNCisJdW5zaWduZWQgaW50IGRlY2ZkdzNyOw0KIA0KIAlpbnRyID0gcWRt
YV9yZWFkbChmc2xfcWRtYSwgc3RhdHVzICsgRlNMX1FETUFfREVEUik7DQogDQotCWlmIChpbnRy
KQ0KLQkJZGV2X2Vycihmc2xfcWRtYS0+ZG1hX2Rldi5kZXYsICJETUEgdHJhbnNhY3Rpb24gZXJy
b3IhXG4iKTsNCisJaWYgKGludHIpIHsNCisJCWRlY2ZkdzByID0gcWRtYV9yZWFkbChmc2xfcWRt
YSwgc3RhdHVzICsgRlNMX1FETUFfREVDRkRXMFIpOw0KKwkJZGVjZmR3MXIgPSBxZG1hX3JlYWRs
KGZzbF9xZG1hLCBzdGF0dXMgKyBGU0xfUURNQV9ERUNGRFcxUik7DQorCQlkZWNmZHcyciA9IHFk
bWFfcmVhZGwoZnNsX3FkbWEsIHN0YXR1cyArIEZTTF9RRE1BX0RFQ0ZEVzJSKTsNCisJCWRlY2Zk
dzNyID0gcWRtYV9yZWFkbChmc2xfcWRtYSwgc3RhdHVzICsgRlNMX1FETUFfREVDRkRXM1IpOw0K
KwkJZGV2X2Vycihmc2xfcWRtYS0+ZG1hX2Rldi5kZXYsDQorCQkJIkRNQSB0cmFuc2FjdGlvbiBl
cnJvciEgKCV4OiAleC0leC0leC0leClcbiIsDQorCQkJaW50ciwgZGVjZmR3MHIsIGRlY2ZkdzFy
LCBkZWNmZHcyciwgZGVjZmR3M3IpOw0KKwl9DQogDQogCXFkbWFfd3JpdGVsKGZzbF9xZG1hLCBG
U0xfUURNQV9ERURSX0NMRUFSLCBzdGF0dXMgKyBGU0xfUURNQV9ERURSKTsNCiAJcmV0dXJuIElS
UV9IQU5ETEVEOw0KDQo=
