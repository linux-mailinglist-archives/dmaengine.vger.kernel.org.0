Return-Path: <dmaengine-owner@vger.kernel.org>
X-Original-To: lists+dmaengine@lfdr.de
Delivered-To: lists+dmaengine@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id 115AF216D8F
	for <lists+dmaengine@lfdr.de>; Tue,  7 Jul 2020 15:18:26 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1727777AbgGGNSX (ORCPT <rfc822;lists+dmaengine@lfdr.de>);
        Tue, 7 Jul 2020 09:18:23 -0400
Received: from de-out1.bosch-org.com ([139.15.230.186]:38746 "EHLO
        de-out1.bosch-org.com" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1725944AbgGGNSX (ORCPT
        <rfc822;dmaengine@vger.kernel.org>); Tue, 7 Jul 2020 09:18:23 -0400
Received: from fe0vm1649.rbesz01.com (lb41g3-ha-dmz-psi-sl1-mailout.fe.ssn.bosch.com [139.15.230.188])
        by fe0vms0186.rbdmz01.com (Postfix) with ESMTPS id 4B1NKm4RkHz1XLFjl;
        Tue,  7 Jul 2020 15:18:20 +0200 (CEST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=etas.com;
        s=key1-intmail; t=1594127900;
        bh=/rfClegd/oGVTBzykNlL7JmX2W+X4Ern425stX9PzYE=; l=10;
        h=From:Subject:From:Reply-To:Sender;
        b=RsGP755V8uvAeidreO5WZyamKdUfVzmmpJmmElW5dTrexNVC+AboCNmharHrI/A8D
         tv3LCjp0grVK8jeBG+Bdca4xnVjZuUU51SeAk4FQJN6kPh9Yon1Ifir5GSz22SZCC+
         fTVu5MfLNeggTR2QHhxYUbLWEzH/2csl3AcTLqvU=
Received: from fe0vm7918.rbesz01.com (unknown [10.58.172.176])
        by fe0vm1649.rbesz01.com (Postfix) with ESMTPS id 4B1NKm4BQBz3LG;
        Tue,  7 Jul 2020 15:18:20 +0200 (CEST)
X-AuditID: 0a3aad10-183ff70000004153-ee-5f04761cdc46
Received: from fe0vm1652.rbesz01.com ( [10.58.173.29])
        (using TLS with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
        (Client did not present a certificate)
        by fe0vm7918.rbesz01.com (SMG Outbound) with SMTP id 64.09.16723.C16740F5; Tue,  7 Jul 2020 15:18:20 +0200 (CEST)
Received: from FE-MBX2013.de.bosch.com (fe-mbx2013.de.bosch.com [10.3.231.19])
        by fe0vm1652.rbesz01.com (Postfix) with ESMTPS id 4B1NKm3VSXzB18;
        Tue,  7 Jul 2020 15:18:20 +0200 (CEST)
Received: from FE-MBX2012.de.bosch.com (10.3.231.18) by
 FE-MBX2013.de.bosch.com (10.3.231.19) with Microsoft SMTP Server
 (version=TLS1_2, cipher=TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384) id
 15.1.1979.3; Tue, 7 Jul 2020 15:18:20 +0200
Received: from FE-MBX2012.de.bosch.com ([fe80::e9da:da62:f945:1619]) by
 FE-MBX2012.de.bosch.com ([fe80::e9da:da62:f945:1619%5]) with mapi id
 15.01.1979.003; Tue, 7 Jul 2020 15:18:20 +0200
From:   "Koehrer Mathias (ETAS/EES-SL)" <mathias.koehrer@etas.com>
To:     "dmaengine@vger.kernel.org" <dmaengine@vger.kernel.org>,
        "vkoul@kernel.org" <vkoul@kernel.org>
Subject: [PATCH v2] dmaengine: Extend NXP QDMA driver to check transmission
 errors
Thread-Topic: [PATCH v2] dmaengine: Extend NXP QDMA driver to check
 transmission errors
Thread-Index: AQHWVGEV2/LlniG+Vk2bCKH+mx0RFg==
Date:   Tue, 7 Jul 2020 13:18:19 +0000
Message-ID: <a86eabe007ea66292c556cc123e9c4f305697d48.camel@bosch.com>
Accept-Language: de-DE, en-US
Content-Language: en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-mailer: Evolution 3.28.5-0ubuntu0.18.04.2 
x-originating-ip: [10.14.52.194]
Content-Type: text/plain; charset="utf-8"
Content-ID: <93CDDC861E70DE4D81CCC52148556BE3@bosch.com>
Content-Transfer-Encoding: base64
MIME-Version: 1.0
X-Brightmail-Tracker: H4sIAAAAAAAAA+NgFmplkeLIzCtJLcpLzFFi42LhslorqytTxhJvcO2MksXqqX9ZLXbeOcHs
        wOSxaVUnm8fnTXIBTFFcNimpOZllqUX6dglcGYvusBR806v4ceE/WwPjHd0uRk4OCQETiR2T
        X7F0MXJxCAnMYJKY2P4AytnNKPHz/AFmCOcNo8Tsac2sEM5+RonNU66xgPSzCThIzFuwnh3E
        FhFIkTj1/zsriC0sECLxbu4jFoh4pMT77ueMELaexNspG5lBbBYBFYlDG16BxXkF3CTaJn0C
        q2cUkJXYsOE8WA2zgLjErSfzmSBuFZBYsgciLiEgKvHy8T9WCFtH4tanqUA1HEC2gsS3lkoQ
        k1lAU2L9Ln2IKRYSm9//YoOwFSWmdD9kh9gqKHFy5hOWCYxis5Asm4XQPQtJ9ywk3bOQdC9g
        ZF3FKJqWalCWa25paKFXlJRaXGVgqJecn7uJERJTAjsYb3d/0DvEyMTBeIhRgoNZSYS3V5sx
        Xog3JbGyKrUoP76oNCe1+BCjNAeLkjivCs/GOCGB9MSS1OzU1ILUIpgsEwenVAOTScq5cK+H
        s6Tf7Oa0s3mwOOaKGDfzptN18mKlu274T2acob/hPINJ2v1XC8+t3MX2oM1vskFEEOeFCz1n
        Hpit4aydtF9L3XHidY83SUXHb6l8Ze2p96rPzf+37Jqpo5p7ONO/V7N2fllyrNYnYf7x4yEt
        rRUC87eeL2md1tter3wobMba4jgV3om+LN7Xv6cI24ZwMWVzre1uKbkXaCcwNbRH8hLbbJ+D
        5Wy/uY6zTZ756ui951fWce3inf6DOSh25vIiT9WsLTf/r3yo++3D5ub93Q4GZcqcmj7fFUx2
        r03W35m3IICLiSFx3sE/Z6VndkqbOTr09Rpc+1c8VXZ98u8wfu66+tmcs5df+B6kxFKckWio
        xVxUnAgA23jXaxgDAAA=
Sender: dmaengine-owner@vger.kernel.org
Precedence: bulk
List-ID: <dmaengine.vger.kernel.org>
X-Mailing-List: dmaengine@vger.kernel.org

RXh0ZW5kIE5YUCBRRE1BIGRyaXZlciB0byBjaGVjayB0cmFuc21pc3Npb24gZXJyb3JzDQoNClRo
ZSBOWFAgUURNQSBkcml2ZXIgKGZzbC1xZG1hLmMpIGRvZXMgbm90IGNoZWNrIHRoZSBzdGF0dXMg
Yml0cw0KdGhhdCBpbmRpY2F0ZSBpZiBhIERNQSB0cmFuc2ZlciBoYXMgYmVlbiBjb21wbGV0ZWQg
c3VjY2Vzc2Z1bGx5Lg0KVGhpcyBwYXRjaCBleHRlbmRzIHRoZSBkcml2ZXIgdG8gZG8gZXhhY3Rs
eSB0aGlzLg0KDQpTaWduZWQtb2ZmLWJ5OiBNYXRoaWFzIEtvZWhyZXIgPG1hdGhpYXMua29laHJl
ckBldGFzLmNvbT4NCi0tLQ0KSW5kZXg6IGxpbnV4LTUuNC9kcml2ZXJzL2RtYS9mc2wtcWRtYS5j
DQo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09
PT09PT09PT09PT09DQotLS0gbGludXgtNS40Lm9yaWcvZHJpdmVycy9kbWEvZnNsLXFkbWEuYw0K
KysrIGxpbnV4LTUuNC9kcml2ZXJzL2RtYS9mc2wtcWRtYS5jDQpAQCAtNTYsNyArNTYsNyBAQA0K
IA0KIC8qIFJlZ2lzdGVycyBmb3IgYml0IGFuZCBnZW5tYXNrICovDQogI2RlZmluZSBGU0xfUURN
QV9DUUlEUl9TUVQJCUJJVCgxNSkNCi0jZGVmaW5lIFFETUFfQ0NERl9GT1RNQVQJCUJJVCgyOSkN
CisjZGVmaW5lIFFETUFfQ0NERl9GT1JNQVQJCUJJVCgyOSkNCiAjZGVmaW5lIFFETUFfQ0NERl9T
RVIJCQlCSVQoMzApDQogI2RlZmluZSBRRE1BX1NHX0ZJTgkJCUJJVCgzMCkNCiAjZGVmaW5lIFFE
TUFfU0dfTEVOX01BU0sJCUdFTk1BU0soMjksIDApDQpAQCAtMTEwLDExICsxMTAsMjMgQEANCiAj
ZGVmaW5lIEZTTF9RRE1BX0NNRF9EU0VOX09GRlNFVAkxOQ0KICNkZWZpbmUgRlNMX1FETUFfQ01E
X0xXQ19PRkZTRVQJCTE2DQogDQorLyogRmllbGQgZGVmaW5pdGlvbiBmb3IgRGVzY3JpcHRvciBz
dGF0dXMgKi8NCisjZGVmaW5lIFFETUFfQ0NERl9TVEFUVVNfUlRFCQlCSVQoNSkNCisjZGVmaW5l
IFFETUFfQ0NERl9TVEFUVVNfV1RFCQlCSVQoNCkNCisjZGVmaW5lIFFETUFfQ0NERl9TVEFUVVNf
Q0RFCQlCSVQoMikNCisjZGVmaW5lIFFETUFfQ0NERl9TVEFUVVNfU0RFCQlCSVQoMSkNCisjZGVm
aW5lIFFETUFfQ0NERl9TVEFUVVNfRERFCQlCSVQoMCkNCisjZGVmaW5lIFFETUFfQ0NERl9TVEFU
VVNfTUFTSwkJUURNQV9DQ0RGX1NUQVRVU19SVEUgfCBcDQorCQkJCQlRRE1BX0NDREZfU1RBVFVT
X1dURSB8IFwNCisJCQkJCVFETUFfQ0NERl9TVEFUVVNfQ0RFIHwgXA0KKwkJCQkJUURNQV9DQ0RG
X1NUQVRVU19TREUgfCBcDQorCQkJCQlRRE1BX0NDREZfU1RBVFVTX0RERQ0KKw0KIC8qIEZpZWxk
IGRlZmluaXRpb24gZm9yIERlc2NyaXB0b3Igb2Zmc2V0ICovDQotI2RlZmluZSBRRE1BX0NDREZf
U1RBVFVTCQkyMA0KICNkZWZpbmUgUURNQV9DQ0RGX09GRlNFVAkJMjANCiAjZGVmaW5lIFFETUFf
U0RERl9DTUQoeCkJCSgoKHU2NCkoeCkpIDw8IDMyKQ0KIA0KKw0KIC8qIEZpZWxkIGRlZmluaXRp
b24gZm9yIHNhZmUgbG9vcCBjb3VudCovDQogI2RlZmluZSBGU0xfUURNQV9IQUxUX0NPVU5UCQkx
NTAwDQogI2RlZmluZSBGU0xfUURNQV9NQVhfU0laRQkJMTYzODUNCkBAIC0yNDMsMTMgKzI1NSwx
MyBAQCBxZG1hX2NjZGZfZ2V0X29mZnNldChjb25zdCBzdHJ1Y3QgZnNsX3FkDQogc3RhdGljIGlu
bGluZSB2b2lkDQogcWRtYV9jY2RmX3NldF9mb3JtYXQoc3RydWN0IGZzbF9xZG1hX2Zvcm1hdCAq
Y2NkZiwgaW50IG9mZnNldCkNCiB7DQotCWNjZGYtPmNmZyA9IGNwdV90b19sZTMyKFFETUFfQ0NE
Rl9GT1RNQVQgfCBvZmZzZXQpOw0KKwljY2RmLT5jZmcgPSBjcHVfdG9fbGUzMihRRE1BX0NDREZf
Rk9STUFUIHwgKG9mZnNldCA8PCBRRE1BX0NDREZfT0ZGU0VUKSk7DQogfQ0KIA0KIHN0YXRpYyBp
bmxpbmUgaW50DQogcWRtYV9jY2RmX2dldF9zdGF0dXMoY29uc3Qgc3RydWN0IGZzbF9xZG1hX2Zv
cm1hdCAqY2NkZikNCiB7DQotCXJldHVybiAobGUzMl90b19jcHUoY2NkZi0+c3RhdHVzKSAmIFFE
TUFfQ0NERl9NQVNLKSA+PiBRRE1BX0NDREZfU1RBVFVTOw0KKwlyZXR1cm4gKGxlMzJfdG9fY3B1
KGNjZGYtPnN0YXR1cykgJiBRRE1BX0NDREZfU1RBVFVTX01BU0spOw0KIH0NCiANCiBzdGF0aWMg
aW5saW5lIHZvaWQNCkBAIC02MTgsNiArNjMwLDcgQEAgZnNsX3FkbWFfcXVldWVfdHJhbnNmZXJf
Y29tcGxldGUoc3RydWN0DQogew0KIAlib29sIGR1cGxpY2F0ZTsNCiAJdTMyIHJlZywgaSwgY291
bnQ7DQorCXU4IGNvbXBsZXRpb25fc3RhdHVzOw0KIAlzdHJ1Y3QgZnNsX3FkbWFfcXVldWUgKnRl
bXBfcXVldWU7DQogCXN0cnVjdCBmc2xfcWRtYV9mb3JtYXQgKnN0YXR1c19hZGRyOw0KIAlzdHJ1
Y3QgZnNsX3FkbWFfY29tcCAqZnNsX2NvbXAgPSBOVUxMOw0KQEAgLTY3Nyw2ICs2OTAsOCBAQCBm
c2xfcWRtYV9xdWV1ZV90cmFuc2Zlcl9jb21wbGV0ZShzdHJ1Y3QNCiAJCX0NCiAJCWxpc3RfZGVs
KCZmc2xfY29tcC0+bGlzdCk7DQogDQorCQljb21wbGV0aW9uX3N0YXR1cyA9IHFkbWFfY2NkZl9n
ZXRfc3RhdHVzKHN0YXR1c19hZGRyKTsNCisNCiAJCXJlZyA9IHFkbWFfcmVhZGwoZnNsX3FkbWEs
IGJsb2NrICsgRlNMX1FETUFfQlNRTVIpOw0KIAkJcmVnIHw9IEZTTF9RRE1BX0JTUU1SX0RJOw0K
IAkJcWRtYV9kZXNjX2FkZHJfc2V0NjQoc3RhdHVzX2FkZHIsIDB4MCk7DQpAQCAtNjg2LDYgKzcw
MSwyNCBAQCBmc2xfcWRtYV9xdWV1ZV90cmFuc2Zlcl9jb21wbGV0ZShzdHJ1Y3QNCiAJCXFkbWFf
d3JpdGVsKGZzbF9xZG1hLCByZWcsIGJsb2NrICsgRlNMX1FETUFfQlNRTVIpOw0KIAkJc3Bpbl91
bmxvY2soJnRlbXBfcXVldWUtPnF1ZXVlX2xvY2spOw0KIA0KKwkJLyogVGhlIGNvbXBsZXRpb25f
c3RhdHVzIGlzIGV2YWx1YXRlZCBoZXJlIChvdXRzaWRlIG9mIHNwaW4gbG9jaykgKi8NCisJCWlm
IChjb21wbGV0aW9uX3N0YXR1cykgew0KKwkJCWlmIChjb21wbGV0aW9uX3N0YXR1cyAmIFFETUFf
Q0NERl9TVEFUVVNfV1RFKSB7DQorCQkJCS8qIFdyaXRlIHRyYW5zYWN0aW9uIGVycm9yICovDQor
CQkJCWZzbF9jb21wLT52ZGVzYy50eF9yZXN1bHQucmVzdWx0ID0gRE1BX1RSQU5TX1dSSVRFX0ZB
SUxFRDsNCisJCQl9DQorCQkJZWxzZSBpZiAoY29tcGxldGlvbl9zdGF0dXMgJiBRRE1BX0NDREZf
U1RBVFVTX1JURSkgew0KKwkJCQkvKiBSZWFkIHRyYW5zYWN0aW9uIGVycm9yICovDQorCQkJCWZz
bF9jb21wLT52ZGVzYy50eF9yZXN1bHQucmVzdWx0ID0gRE1BX1RSQU5TX1JFQURfRkFJTEVEOw0K
KwkJCX0NCisJCQllbHNlIHsNCisJCQkJLyogQ29tbWFuZC9zb3VyY2UvZGVzdGluYXRpb24gZGVz
Y3JpcHRpb24gZXJyb3IgKi8NCisJCQkJZnNsX2NvbXAtPnZkZXNjLnR4X3Jlc3VsdC5yZXN1bHQg
PSBETUFfVFJBTlNfQUJPUlRFRDsNCisJCQkJZGV2X2Vycihmc2xfcWRtYS0+ZG1hX2Rldi5kZXYs
ICJETUEgc3RhdHVzIGRlc2NyaXB0b3IgZXJyb3IgJXhcbiIsDQorCQkJCQkJY29tcGxldGlvbl9z
dGF0dXMpOw0KKwkJCX0NCisJCX0NCisNCiAJCXNwaW5fbG9jaygmZnNsX2NvbXAtPnFjaGFuLT52
Y2hhbi5sb2NrKTsNCiAJCXZjaGFuX2Nvb2tpZV9jb21wbGV0ZSgmZnNsX2NvbXAtPnZkZXNjKTsN
CiAJCWZzbF9jb21wLT5xY2hhbi0+c3RhdHVzID0gRE1BX0NPTVBMRVRFOw0KQEAgLTcwNCw3ICs3
MzcsMTQgQEAgc3RhdGljIGlycXJldHVybl90IGZzbF9xZG1hX2Vycm9yX2hhbmRsZQ0KIAlpbnRy
ID0gcWRtYV9yZWFkbChmc2xfcWRtYSwgc3RhdHVzICsgRlNMX1FETUFfREVEUik7DQogDQogCWlm
IChpbnRyKQ0KLQkJZGV2X2Vycihmc2xfcWRtYS0+ZG1hX2Rldi5kZXYsICJETUEgdHJhbnNhY3Rp
b24gZXJyb3IhXG4iKTsNCisJew0KKwkJdW5zaWduZWQgaW50IGRlY2ZkdzByID0gcWRtYV9yZWFk
bChmc2xfcWRtYSwgc3RhdHVzICsgRlNMX1FETUFfREVDRkRXMFIpOw0KKwkJdW5zaWduZWQgaW50
IGRlY2ZkdzFyID0gcWRtYV9yZWFkbChmc2xfcWRtYSwgc3RhdHVzICsgRlNMX1FETUFfREVDRkRX
MVIpOw0KKwkJdW5zaWduZWQgaW50IGRlY2ZkdzJyID0gcWRtYV9yZWFkbChmc2xfcWRtYSwgc3Rh
dHVzICsgRlNMX1FETUFfREVDRkRXMlIpOw0KKwkJdW5zaWduZWQgaW50IGRlY2ZkdzNyID0gcWRt
YV9yZWFkbChmc2xfcWRtYSwgc3RhdHVzICsgRlNMX1FETUFfREVDRkRXM1IpOw0KKwkJZGV2X2Vy
cihmc2xfcWRtYS0+ZG1hX2Rldi5kZXYsICJETUEgdHJhbnNhY3Rpb24gZXJyb3IhICgleDogJXgt
JXgtJXgtJXgpXG4iLA0KKwkJCQlpbnRyLCBkZWNmZHcwciwgZGVjZmR3MXIsIGRlY2ZkdzJyLCBk
ZWNmZHczcik7DQorCX0NCiANCiAJcWRtYV93cml0ZWwoZnNsX3FkbWEsIEZTTF9RRE1BX0RFRFJf
Q0xFQVIsIHN0YXR1cyArIEZTTF9RRE1BX0RFRFIpOw0KIAlyZXR1cm4gSVJRX0hBTkRMRUQ7DQo=
